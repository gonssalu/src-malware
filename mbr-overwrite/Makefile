CC = gcc

all:
	mkdir -p bin
	mkdir -p include
	nasm -f bin payloads/boot_payload.asm -o payloads/boot_payload.bin
	xxd -i payloads/boot_payload.bin > include/payload.h
	rm payloads/boot_payload.bin
	$(CC) -Iinclude -static src/mbr-overwrite.c -o bin/mbr-overwrite

clean:
	rm include/payload.h bin/mbr-overwrite
