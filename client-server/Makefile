TARGETS = client server

SRC_DIRS = . ./helper

SRCS = $(foreach dir, $(SRC_DIRS), $(wildcard $(dir)/*.c))

OBJS = $(SRCS:.c=.o)

DEPS = $(OBJS:.o=.d)

CC = gcc
CFLAGS = -Wall -g -I./helper

LIBS = -lpthread

all: $(TARGETS)

client: client.o ./helper/helper.o
	$(CC) $(CFLAGS) $^ $(LIBS) -o $@

server: server.o ./helper/helper.o
	$(CC) $(CFLAGS) $^ $(LIBS) -o $@

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

-include $(DEPS)

clean:
	rm -f $(TARGETS) $(OBJS) $(DEPS)